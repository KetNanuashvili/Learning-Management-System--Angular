<app-header></app-header>

<div class="auth-page">
  <section class="auth-wrap">
    <div class="auth-card" role="form" aria-labelledby="authTitle">
      <h1 id="authTitle" class="title">
        Create your account <span aria-hidden="true"></span>
      </h1>
      <p class="subtitle">Sign up to get started</p>

      <!-- Form (Reactive) -->
      <form class="auth-form" [formGroup]="form" (ngSubmit)="submit()" novalidate>
        <label class="field">
          <span class="label">Full name</span>
          <input
            type="text"
            placeholder="Full name"
            autocomplete="name"
            formControlName="fullName"
            aria-required="true"
            [attr.aria-invalid]="hasError('fullName','required') || hasError('fullName','minlength')"
          />
          <small *ngIf="hasError('fullName','required')" class="err">Full name is required</small>
          <small *ngIf="hasError('fullName','minlength')" class="err">Minimum 2 characters</small>
        </label>

        <label class="field">
          <span class="label">Email</span>
          <input
            type="email"
            placeholder="Email"
            autocomplete="email"
            formControlName="email"
            aria-required="true"
            [attr.aria-invalid]="hasError('email','required') || hasError('email','email')"
          />
          <small *ngIf="hasError('email','required')" class="err">Email is required</small>
          <small *ngIf="hasError('email','email')" class="err">Enter a valid email</small>
        </label>

        <label class="field">
          <span class="label">Password</span>
          <input
            type="password"
            placeholder="Password"
            autocomplete="new-password"
            formControlName="password"
            aria-required="true"
            [attr.aria-invalid]="hasError('password','required') || hasError('password','minlength')"
          />
          <small *ngIf="hasError('password','required')" class="err">Password is required</small>
          <small *ngIf="hasError('password','minlength')" class="err">Minimum 6 characters</small>
        </label>

        <!-- Role (read-only) -->
        <label class="field">
          <span class="label">Role</span>
          <input type="text" value="Student" readonly class="readonly-field" aria-readonly="true" />
          <!-- ფორმაში როლი მაინც იგზავნება -->
          <input type="hidden" formControlName="roleId" />
        </label>

        <button type="submit" class="btn-primary" [disabled]="form.invalid">
          Sign up
        </button>
      </form>
    </div>
  </section>
</div>
